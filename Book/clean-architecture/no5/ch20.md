# 20장 업무 규칙

업무 규칙과 플러그인
- 핵심 업무 규칙 : 사업 자체에 핵심적, 자동화하지 않아도 업무 규칙은 그대로 존재하고 진행되어야 함
- 핵심 업무 데이터 : 핵심 업무 규칙을 이행하기 위한 데이터
  - 대출 예시 : 대출 잔액, 이자율, 지급 일정 등...
- 엔티티
  - 이러한 유형의 객체는 핵심 규칙과 핵심 데이터는 본질적으로 결합되어 있다.

## 엔티티
- 컴퓨터 시스템 내부의 객체로, 핵심 업무 데이터를 기반으로 동작하는 일련의 조그만 핵심 업무 규칙을 구체화한다. => 도메인 객체
- 데이터와 관련된 핵심 업무 규칙을 인터페이스화
- 해당 클래스는 외부 저수준 모듈과 요구사항으로 인해 오염되서는 안된다.
- 어떤 시스템에서도 업무가 수행 가능해야 하며, 시스템의 표현 방식이나 데이터 저장 방식 등과는 무관하게 순전히 업무에 대한 내용만 포함한다.

## 유스케이스
- 모든 업무 규칙이 엔티티처럼 순수한 것은 아니다.
- 자동화된 시스템이 사용되는 방법을 설명하는 것이 유스케이스이다.
- 즉, 사용자가 제공해야 할 입력, 보여줄 출력, 그 과정에서 진행되는 처리 단계를 기술한다.
- 엔티티의 핵심 업무 규칙과는 반대로, 유스케이스는 어플리케이션에 특화된 업무 규칙을 설명한다.
- 하지만 input과 output 데이터가 정해져 있을 뿐, 사용자 인터페이스를 기술하진 않는다. 웹인지, 콘솔인지, 순수 서비스인지 등의 내용은 기술하지 않는다.
- 시스템이 사용자에게 어떻게 보이는지는 설명하지 않는다. (순수 비즈니스 로직)

> 엔티티는 자신을 제어하는 유스케이스에 대해 아무것도 알지 못한다. 엔티티와 같은 고수준 개념은 유스케이스와 같은 저수준 개념을 의존하지 않는다.

## 요청 및 응답 모델
- 제대로 설계 된 유스케이스 객체라면 출력 데이터를 생성하되, 사용자나 다른 컴포넌트와 주고 받는 방식에 대해서는 알지 못해야 한다.
- 단순하게 요청 데이터를 받아서, 단순 응답 데이터를 출력한다.
- 요청 및 응답 모델을 독립적으로 구성해야 한다. 유스케이스가 의존하면 결합되어 버린다.
- 엔티티와 요청/응답 모델은 많은 데이터가 공유되고 겹칠 수 있지만, 이것은 우연히 겹치는 것으로 시간이 지나면 두 객체는 완전히 다른 이유로 변경된다.

## 결론
- 업무 규칙은 소프트웨어 시스템이 존재하는 이유이다.
- 해당 규칙은 사용자 인터페이스나 데이터베이스 등 저수준을 의존해선 안되며, 시스템에서 가장 독립적이고 가장 많이 재사용될 수 있는 코드여야 한다.